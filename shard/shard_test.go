package shard

import "testing"

type crc16TestPair struct {
	In  string
	Out uint16
}

var crc16TestCases = []crc16TestPair{
	{"test-key", 12197},
	{"alice", 41027},
	{"open-the-door", 2476},
	{"filedag", 41036},
	{"filedrive", 64329},
	{"felix2008", 60078},
	{"QmTJXRyWuWC287xDaGxrV1GjHTXq2DxnjB7H5A17pUmASy", 23759},
	{"QmUPhqRNdoUWUvyFbTKAvm3zKW7ee7ArCyMcEqsmWa6Kzp", 3474},
	{"QmVGckWZqh9iBXe2BotDdZFcSQ2EmY7Z3bpSmntojFPgbE", 40366},
	{"QmbpPKeQMq38XoRXJkeLSEi5Kd7n9EBszQ8VexGpTDmXH3", 60529},
	{"QmQ6yobSietqQC7qDmSaJg2zVjHWR5GEDqsQyoQyzrDNoC", 17825},
	{"QmRxiEwFKQrS5VL5cUWf4rSiWxa6GQkr8Zd3JN2tLxnpnu", 17459},
	{"/blocks/CIQGEQRABRBZ2IV7GTEGVOGXNHUR7PHXXRX2WO3G76GRXXUKCJVHOUA", 35646},
	{"/blocks/CIQAML5P5ALKOILUMWLKDB76Z63B2J46RAC5JQNQK22IWT3RACWFJMA", 63919},
	{"/blocks/CIQKSGG5LQMQVKNOJEWM3PPCFIYECX6BAJYP6RT6NIPH6DM6K3GI7GA", 15950},
	{"/blocks/CIQNNRBV4ON3NP7TSPE6MN3YWE7S7PNALRZLKN6T6O7BY6NUEDGDQSQ", 39223},
	{"/blocks/CIQK5PHYRALT4HEK2JHBIMMD6IEEZOWNXXWP4Y4LOUUWEGGBUZWCGZY", 21299},
	{"/blocks/CIQHEW7EWW62ND7CXGQ5WBOBYUA3X6A53JJENIPHUZFQ22NXLRSTCHY", 30847},
	{"/blocks/CIQPAML7MZVTTMJL5CZBLGBAO5GHE5BUOONASZKYZQKOOX3WXD2BDHI", 38274},
	{"/blocks/CIQKBQGF5RFR7JXQB6CU3SGWBIBGNXUMNS5QNOGVR6TVJICQMOOIEXI", 39700},
	{"/blocks/CIQB66WHRP5J75YLQPOAP6QP5EX3PPNDWLHB4HKQMJ7DBX7AKVIWGJQ", 61357},
	{"/blocks/CIQDZEFEXUTDSEXPZ5OMMU5V77X4VT42L4GXMYA4A4VDLMD4OMRLQ2Y", 44353},
	{"/blocks/CIQFQFXT3NPGDB5BXZQOUGJAVGXOQONWCLAKWZXESKZ2I66D5XOT5NA", 60664},
	{"/blocks/CIQIKGIWYYV2YL47ON7NFWT2FXNVWUEB7C4FAQO5ZEGZBX2GG5NE2RA", 11835},
	{"/blocks/CIQOWMEW2FWSS3W6IT5OKSRBYWC33F53IBGMKPZO3SR427UAV2TRNNI", 1846},
	{"/blocks/CIQANT4YIBWNYEWOFXDXQFTKPAMDWZDZJY6XZYHBAC7ZH6QW4CCYNKA", 47496},
	{"/blocks/CIQET6OEL5CIPN6IT5ZYKMU5YXQTVPHNNXV4PWC2BX2YV3MX2JHOADI", 55362},
	{"/blocks/CIQOVGKWHKL7BFLBOZL2VP5YQSQ2MZY3TGIELLB7LRQE46H3NDPTVZY", 8349},
	{"/blocks/CIQJ6FZXUYCKPC7ZJDZ3GHULZY3MQECVCSFDRNRAU7LAMJAGV3AO3EY", 26748},
	{"/blocks/CIQGRSGOAKH3ONIBWTJ2ZJ2XXR22I5DIYPCJYFZO62KOKZEL25DZOUI", 54812},
	{"/blocks/CIQKDICTDHCTOU3TM2FTXB2HQFTQIZAP4HFLSUJ5K2AVSDQ66V56HTA", 39267},
	{"/providers/CIQA25R3LLWT7L2A5KFBVMODMZRFZNRTCJW7JP7JACUQ3AXJEIF6ONA/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 19101},
	{"/provider-v1/queue/1628040403838902750/b", 5715},
	{"/provider-v1/queue/1628040476980965048/b", 52500},
	{"/providers/CIQA45BAOVTH5AKKFRDENBN4TXZYUA46UOICQ2TWS7E3QZT4IQPDDEA/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 32957},
	{"/providers/CIQA47OMT2RC6D7QGL47L2SNR3BM2SDRU6RUTSONMYZI3HUIA5MMZWI/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 62540},
	{"/providers/CIQA54XBTP2SPEUIX7ZZG7KBVZ7FUWSUBQAPGQ3PFEQOYOZKE4Q3J5I/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 6678},
	{"/providers/CIQA67YDCPUR5AYOPEP4PN7DT2QLXI6G4OEZMT4BQNVPOMDOCCLUAZA/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 19000},
	{"/providers/CIQA6KV2Y4A3WBC6SESENBVZPQERHEWOTGPLEGXJ7M5QEIN5D5SOZIQ/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 18757},
	{"/providers/CIQAAKFLOWAUFV2ZUI7ZIPQN76UV73UUWSVSVXCB22L6CH5K3F4J7ZQ/AASAQAISECO6C4ACMIE3DVPVQCA6OXIVOYI3WE5QTJG6Z3RKDLM5C6SNLDVHY", 43096},
}

func TestCRC16Sum(t *testing.T) {
	var result = make([]uint16, len(crc16TestCases))
	for i, tc := range crc16TestCases {
		result[i] = CRC16Sum(tc.In)
	}
	for i, res := range result {
		if res != crc16TestCases[i].Out {
			t.Fatal("unmatched crc16sum")
		}
	}
}
